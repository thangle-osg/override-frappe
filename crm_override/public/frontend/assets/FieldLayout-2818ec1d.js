import{h as Ve,g as K,u as Ae,b as Je,d as Ye,e as Pe,_ as ze}from"./modals-677e544a.js";import{D as ne,b as $e,E as ye,d as De,_ as Se}from"./DragVerticalIcon-daedf401.js";import{I as He}from"./IndicatorIcon-3bcbda75.js";import{b as re,D as xe,g as ie,_ as ce,u as me,x as Q,A as qe,r as Ce}from"./index-71945f41.js";import{N as Z,O as ee,l as N,y as I,e as A,f as a,c as $,d as y,F as le,r as te,g as v,w as V,b as h,a2 as q,aH as fe,B as R,G as ge,t as T,u as t,aU as Ke,W as Fe,X as _e,z as Re,n as J,L as We,M as Xe,a8 as pe,a as Qe,aF as Ze,aE as el,a5 as ll,ab as tl,$ as be,_ as he,k as P,I as H,m as al,bA as ve,C as we,V as de,Y as Le,bu as nl,P as ae,aa as ol,a9 as sl}from"./index-93b98c2f.js";import{L as ue,_ as Oe}from"./Link-2168dbe1.js";const il={class:"group flex flex-wrap gap-1 min-h-20 p-1.5 rounded text-base bg-surface-gray-2 hover:bg-surface-gray-3 focus:border-outline-gray-4 focus:ring-0 focus-visible:ring-2 focus-visible:ring-outline-gray-3 text-ink-gray-8 transition-colors w-full"},rl={class:"w-full"},ul=["onClick"],dl={__name:"TableMultiselectInput",props:Z({doctype:{type:String,required:!0},errorMessage:{type:Function,default:p=>`${p} is an Invalid value`}},{modelValue:{type:Array,default:()=>[]},modelModifiers:{}}),emits:Z(["change"],["update:modelValue"]),setup(p,{emit:c}){const o=p,D=c,{getFields:G}=re(o.doctype),S=ee(p,"modelValue"),M=N([]),L=N(null),U=N(""),O=N(""),w=I(()=>O.value?{name:["not in",b.value]}:[]),b=I(()=>(L.value="",u(),O.value?S.value.map(n=>n[O.value.fieldname]):[])),u=()=>{if(L.value="",!O.value){let n=G();O.value=n==null?void 0:n.find(f=>["Link","User"].includes(f.fieldtype)),O.value||(L.value="Table MultiSelect requires a Table with atleast one Link field")}return O.value},e=n=>{if(L.value=null,S.value.some(f=>f[O.value.fieldname]===n)){L.value="Value already exists";return}n&&(S.value.push({[O.value.fieldname]:n}),D("change",S.value),!L.value&&(U.value=""))},F=n=>{let f=S.value.filter(l=>l[O.value.fieldname]!==n);D("change",f)},_=()=>{var f;if(U.value)return;let n=(f=M.value[M.value.length-1])==null?void 0:f.$el;document.activeElement===n?(S.value.pop(),D("change",S.value),ge(()=>{S.value.length&&(n=M.value[M.value.length-1].$el,n==null||n.focus())})):n==null||n.focus()};return(n,f)=>{const l=A("FeatherIcon"),i=A("Button"),C=A("ErrorMessage");return a(),$("div",null,[y("div",il,[(a(!0),$(le,null,te(b.value,x=>(a(),v(i,{ref_for:!0,ref_key:"valuesRef",ref:M,key:x,label:x,theme:"gray",variant:"subtle",class:"rounded bg-surface-white hover:!bg-surface-gray-1 focus-visible:ring-outline-gray-4",onKeydownCapture:fe(q(_,["stop"]),["delete"])},{suffix:V(()=>[h(l,{class:"h-3.5",name:"x",onClick:q(d=>F(x),["stop"])},null,8,["onClick"])]),_:2},1032,["label","onKeydownCapture"]))),128)),y("div",rl,[O.value?(a(),v(ue,{key:0,class:"form-control flex-1 truncate cursor-text",value:U.value,filters:w.value,doctype:O.value.options,onChange:f[0]||(f[0]=x=>e(x)),hideMe:!0},{target:V(({togglePopover:x})=>[y("button",{class:"w-full h-7 cursor-text",onClick:q(x,["stop"])},null,8,ul)]),_:1},8,["value","filters","doctype"])):R("",!0)])]),L.value?(a(),v(C,{key:0,class:"mt-2 pl-2",message:L.value},null,8,["message"])):R("",!0)])}}},cl={class:"flex items-center gap-2 text-2xl font-semibold leading-6 text-ink-gray-9"},ml={class:"mt-4"},pl={class:"text-base text-ink-gray-8 mb-2"},vl={class:"px-1 py-0.5 bg-surface-gray-2 border border-outline-gray-modals rounded text-base text-ink-gray-8 flex items-center justify-between gap-2"},fl={class:"flex items-center gap-2"},yl={class:"flex items-center gap-2"},gl={class:"flex flex-col gap-1 text-ink-gray-9"},_l={class:"text-ink-gray-4 text-sm"},bl={class:"flex items-center gap-2 justify-end"},hl={__name:"GridFieldsEditorModal",props:Z({doctype:String,parentDoctype:String},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(p){const c=p,{getFields:o,getGridViewSettings:D,saveUserSettings:G}=re(c.doctype),S=ee(p,"modelValue"),M=N(!1),L=N(null),U=I(()=>JSON.stringify(w.value)!==JSON.stringify(O.value)),O=I(()=>{let f=o(),l=D(c.parentDoctype);return l.length?l.map(i=>{let C=f.find(x=>x.fieldname===i.fieldname);if(C)return C.columns=i.columns,n(C)}):f==null?void 0:f.filter(i=>i.in_list_view).map(i=>n(i))}),w=N(JSON.parse(JSON.stringify(O.value||[]))),b=I(()=>{var f;return(f=o())==null?void 0:f.filter(l=>!w.value.find(i=>i.fieldname===l.fieldname)&&!["Tab Break","Section Break","Column Break","Table"].includes(l.fieldtype))});function u(){w.value=JSON.parse(JSON.stringify(O.value||[]))}function e(f){w.value.push(n(f))}function F(f){const l=w.value.findIndex(i=>i.fieldname===f.fieldname);w.value.splice(l,1)}function _(){M.value=!0;let f=w.value.map(l=>({fieldname:l.fieldname,columns:l.columns}));if(f.length===0){L.value=__("At least one field is required");return}G(c.parentDoctype,"GridView",f,()=>{M.value=!1,S.value=!1})}function n(f){return{label:f.label,fieldname:f.fieldname,fieldtype:f.fieldtype,options:f.options,in_list_view:f.in_list_view,columns:f.columns||2}}return(f,l)=>{const i=A("Badge"),C=A("TextInput"),x=A("Button");return a(),v(t(Fe),{modelValue:S.value,"onUpdate:modelValue":l[1]||(l[1]=d=>S.value=d)},{"body-title":V(()=>[y("h3",cl,[y("div",null,T(f.__("Edit Grid Fields Layout")),1),U.value?(a(),v(i,{key:0,label:f.__("Not Saved"),variant:"subtle",theme:"orange"},null,8,["label"])):R("",!0)])]),"body-content":V(()=>{var d,W;return[y("div",ml,[y("div",pl,T(f.__("Fields Order")),1),(d=O.value)!=null&&d.length?(a(),v(t(ne),{key:0,list:w.value,group:"fields","item-key":"fieldname",class:"flex flex-col gap-1"},{item:V(({element:E})=>[y("div",vl,[y("div",fl,[h($e,{class:"h-3.5 cursor-grab"}),y("div",null,T(E.label),1)]),y("div",yl,[h(C,{variant:"outline",type:"number",modelValue:E.columns,"onUpdate:modelValue":oe=>E.columns=oe,class:"w-20"},null,8,["modelValue","onUpdate:modelValue"]),h(x,{variant:"ghost",icon:"x",onClick:oe=>F(E)},null,8,["onClick"])])])]),_:1},8,["list"])):R("",!0),(W=b.value)!=null&&W.length?(a(),v(Oe,{key:1,value:"",options:b.value,onChange:l[0]||(l[0]=E=>e(E))},{target:V(({togglePopover:E})=>[h(x,{class:"w-full mt-2",label:f.__("Add Field"),iconLeft:"plus",onClick:oe=>E()},null,8,["label","onClick"])]),"item-label":V(({option:E})=>[y("div",gl,[y("div",null,T(E.label),1),y("div",_l,T(`${E.fieldname} - ${E.fieldtype}`),1)])]),_:1},8,["options"])):R("",!0),L.value?(a(),v(t(Ke),{key:2,class:"mt-3",message:L.value},null,8,["message"])):R("",!0)])]}),actions:V(()=>[y("div",bl,[U.value?(a(),v(x,{key:0,class:"w-full",label:f.__("Reset"),onClick:u},null,8,["label"])):R("",!0),h(x,{class:"w-full",label:f.__("Save"),variant:"solid",onClick:_,loading:M.value,disabled:!U.value},null,8,["label","loading","disabled"])])]),_:1},8,["modelValue"])}}},kl={class:"flex flex-col gap-5.5"},xl={class:"flex items-center gap-2 text-base bg-surface-gray-2 rounded py-2 px-2.5"},Cl=["onClick"],wl=["onDblclick"],Vl={key:0,class:"flex items-center gap-2"},$l={key:1,class:"flex gap-1 items-center"},Dl={class:"section flex flex-col gap-1.5 p-2.5 bg-surface-gray-2 rounded cursor-grab"},Sl={class:"flex items-center justify-between"},Fl=["onDblclick"],Rl={key:1,class:"flex gap-2 items-center"},Ll={class:"flex flex-col gap-1.5 flex-1 p-2 border border-dashed border-outline-gray-2 rounded bg-surface-modal cursor-grab"},Ol={class:"field px-2.5 py-2 border border-outline-gray-2 rounded text-base bg-surface-modal text-ink-gray-8 flex items-center leading-4 justify-between gap-2"},Ml={class:"flex items-center gap-2 truncate"},Bl={class:"truncate"},Ul={class:"gap-2 w-full"},Tl={class:"flex flex-col gap-1 text-ink-gray-9"},Gl={class:"text-ink-gray-4 text-sm"},Nl={class:"mt-5.5"},El={__name:"FieldLayoutEditor",props:{tabs:Object,doctype:String,onlyRequired:{type:Boolean,default:!1}},setup(p){const c=p,o=N(0),D=I(()=>c.tabs.length==1&&!c.tabs[0].label?"prefix":"default"),G=["Geolocation","Attach","Attach Image","HTML","Signature"],S=I(()=>({doctype:c.doctype,restricted_fieldtypes:G,as_array:!0,only_required:c.onlyRequired})),M=_e({url:"crm.api.doc.get_fields_meta",params:S.value,cache:["fieldsMeta",c.doctype],auto:!0,transform:b=>{var F;let u=["name","owner","creation","modified","modified_by","docstatus","_comments","_user_tags","_assign","_liked_by"],e=[];return(F=c.tabs)==null||F.forEach(_=>{var n;(n=_.sections)==null||n.forEach(f=>{var l;(l=f.columns)==null||l.forEach(i=>{e=e.concat(i.fields)})})}),b.filter(_=>!e.find(n=>n.fieldname===_.fieldname)&&!u.includes(_.fieldname))}});function L(){if(c.tabs.length==1&&!c.tabs[0].label){c.tabs[0].label=__("New Tab");return}c.tabs.push({label:__("New Tab"),name:"tab_"+ie(),sections:[]}),o.value=c.tabs.length?c.tabs.length-1:0}function U(b,u){u&&b.fields.push(u)}function O(b){return[{label:__("Edit"),icon:"edit",onClick:()=>b.editingLabel=!0},{label:__("Remove tab"),icon:"trash-2",onClick:()=>{if(c.tabs.length==1){c.tabs[0].label="";return}c.tabs.splice(o.value,1),o.value=o.value?o.value-1:0}}]}function w(b,u,e){let F=u.columns[u.columns.length-1];return[{group:__("Section"),items:[{label:__("Edit"),icon:"edit",onClick:()=>u.editingLabel=!0},{label:u.collapsible?__("Uncollapsible"):__("Collapsible"),icon:u.collapsible?"chevron-up":"chevron-down",onClick:()=>u.collapsible=!u.collapsible},{label:u.hideLabel?__("Show label"):__("Hide label"),icon:u.hideLabel?"eye":"eye-off",onClick:()=>u.hideLabel=!u.hideLabel},{label:u.hideBorder?__("Show border"):__("Hide border"),icon:"minus",onClick:()=>u.hideBorder=!u.hideBorder},{label:__("Remove section"),icon:"trash-2",onClick:()=>{e.sections.splice(e.sections.indexOf(u),1)},condition:()=>u.editable!==!1},{label:__("Remove and move columns to {0} section",[b==0?__("next"):__("previous")]),icon:"trash-2",onClick:()=>{let _=e.sections[b==0?b+1:b-1];b==0?_.columns=u.columns.concat(_.columns):_.columns=_.columns.concat(u.columns),e.sections.splice(e.sections.indexOf(u),1)},condition:()=>u.editable!==!1&&u.columns.length},{label:__("Move to previous tab"),icon:"corner-up-left",onClick:()=>{c.tabs[o.value-1].sections.push(u),c.tabs[o.value].sections.splice(c.tabs[o.value].sections.indexOf(u),1),o.value-=1},condition:()=>c.tabs[o.value-1]},{label:__("Move to next tab"),icon:"corner-up-right",onClick:()=>{c.tabs[o.value+1].sections.push(u),c.tabs[o.value].sections.splice(c.tabs[o.value].sections.indexOf(u),1),o.value+=1},condition:()=>c.tabs[o.value+1]}]},{group:__("Column"),items:[{label:__("Add column"),icon:"columns",onClick:()=>{u.columns.push({label:"",name:"column_"+ie(),fields:[]})},condition:()=>u.columns.length<4},{label:__("Remove column"),icon:"trash-2",onClick:()=>u.columns.pop(),condition:()=>u.columns.length>1},{label:__("Remove and move fields to previous column"),icon:"trash-2",onClick:()=>{let _=u.columns[u.columns.length-2];_.fields=_.fields.concat(F.fields),u.columns.pop()},condition:()=>u.columns.length>1&&F.fields.length},{label:__("Move to next section"),icon:"corner-up-right",onClick:()=>{e.sections[b+1].columns.push(F),u.columns.pop()},condition:()=>e.sections[b+1]},{label:__("Move to previous section"),icon:"corner-up-left",onClick:()=>{e.sections[b-1].columns.push(F),u.columns.pop()},condition:()=>e.sections[b-1]}]}]}return Re(()=>c.doctype,()=>M.fetch(S.value),{immediate:!0}),(b,u)=>{const e=A("Input"),F=A("Button"),_=A("FeatherIcon");return a(),$("div",kl,[y("div",xl,[p.tabs.length&&p.tabs[o.value].label?(a(),v(t(ne),{key:0,list:p.tabs,"item-key":"name",class:"flex items-center gap-2",onEnd:u[2]||(u[2]=n=>o.value=n.newIndex)},{item:V(({element:n,index:f})=>[y("div",{class:J(["flex items-center gap-2 cursor-pointer rounded",[o.value==f?"text-ink-gray-9 bg-surface-white shadow-sm":"text-ink-gray-5 hover:text-ink-gray-9 hover:bg-surface-white hover:shadow-sm",n.editingLabel?"p-1":"px-2 py-1"]]),onClick:l=>o.value=f},[y("div",{onDblclick:()=>n.editingLabel=!0},[n.editingLabel?(a(),$("div",$l,[h(e,{modelValue:n.label,"onUpdate:modelValue":l=>n.label=l,onKeydown:fe(l=>n.editingLabel=!1,["enter"]),onBlur:l=>n.editingLabel=!1,onClick:u[0]||(u[0]=q(()=>{},["stop"]))},null,8,["modelValue","onUpdate:modelValue","onKeydown","onBlur"]),n.editingLabel?(a(),v(F,{key:0,icon:"check",variant:"ghost",onClick:l=>n.editingLabel=!1},null,8,["onClick"])):R("",!0)])):(a(),$("div",Vl,T(b.__(n.label)||b.__("Untitled")),1))],40,wl),n.label&&o.value==f?(a(),v(t(xe),{key:0,options:O(n),class:"!h-4",onClick:u[1]||(u[1]=q(()=>{},["stop"]))},{default:V(()=>[h(F,{variant:"ghost",class:"!p-1 !h-4"},{default:V(()=>[h(_,{name:"more-horizontal",class:"h-4"})]),_:1})]),_:1},8,["options"])):R("",!0)],10,Cl)]),_:1},8,["list"])):R("",!0),h(F,{variant:"ghost",class:"!h-6.5 !text-ink-gray-5 hover:!text-ink-gray-9",onClick:L,label:b.__("Add Tab")},{[D.value]:V(()=>[h(_,{name:"plus",class:"h-4"})]),_:2},1032,["label"])]),(a(!0),$(le,null,te(p.tabs,(n,f)=>We((a(),$("div",{key:n.name},[h(t(ne),{list:n.sections,"item-key":"name",class:"flex flex-col gap-5.5"},{item:V(({element:l,index:i})=>[y("div",Dl,[y("div",Sl,[y("div",{class:"flex h-7 max-w-fit cursor-pointer items-center gap-2 text-base font-medium leading-4 text-ink-gray-9",onDblclick:()=>l.editingLabel=!0},[l.editingLabel?(a(),$("div",Rl,[h(e,{modelValue:l.label,"onUpdate:modelValue":C=>l.label=C,onKeydown:fe(C=>l.editingLabel=!1,["enter"]),onBlur:C=>l.editingLabel=!1,onClick:u[3]||(u[3]=q(()=>{},["stop"]))},null,8,["modelValue","onUpdate:modelValue","onKeydown","onBlur"]),l.editingLabel?(a(),v(F,{key:0,icon:"check",variant:"ghost",onClick:C=>l.editingLabel=!1},null,8,["onClick"])):R("",!0)])):(a(),$("div",{key:0,class:J(["flex items-center gap-2",{"text-ink-gray-3":l.hideLabel||!l.label,italic:!l.label}])},[pe(T(b.__(l.label)||b.__("No label"))+" ",1),l.collapsible?(a(),v(_,{key:0,name:"chevron-down",class:"h-4 transition-all duration-300 ease-in-out"})):R("",!0)],2))],40,Fl),h(t(xe),{options:w(i,l,n)},{default:V(()=>[h(F,{variant:"ghost"},{default:V(()=>[h(_,{name:"more-horizontal",class:"h-4"})]),_:1})]),_:1},8,["options"])]),h(t(ne),{class:"flex gap-2",list:l.columns,group:"columns","item-key":"name"},{item:V(({element:C})=>[y("div",Ll,[h(t(ne),{list:C.fields,group:"fields","item-key":"fieldname",class:"flex flex-col gap-1.5",handle:".cursor-grab"},{item:V(({element:x})=>[y("div",Ol,[y("div",Ml,[h($e,{class:"h-3.5 cursor-grab"}),y("div",Bl,T(x.label),1)]),h(F,{variant:"ghost",class:"!size-4 rounded-sm",icon:"x",onClick:d=>C.fields.splice(C.fields.indexOf(x),1)},null,8,["onClick"])])]),_:2},1032,["list"]),t(M).data?(a(),v(Oe,{key:0,value:"",options:t(M).data,onChange:x=>U(C,x)},{target:V(({togglePopover:x})=>[y("div",Ul,[h(F,{class:"w-full !h-8 !bg-surface-modal",variant:"outline",label:b.__("Add Field"),iconLeft:"plus",onClick:d=>x()},null,8,["label","onClick"])])]),"item-label":V(({option:x})=>[y("div",Tl,[y("div",null,T(x.label),1),y("div",Gl,T(`${x.fieldname} - ${x.fieldtype}`),1)])]),_:1},8,["options","onChange"])):R("",!0)])]),_:1},8,["list"])])]),_:2},1032,["list"]),y("div",Nl,[h(F,{class:"w-full h-8",variant:"subtle",label:b.__("Add Section"),iconLeft:"plus",onClick:u[4]||(u[4]=l=>p.tabs[o.value].sections.push({label:b.__("New Section"),name:"section_"+t(ie)(),opened:!0,columns:[{name:"column_"+t(ie)(),fields:[]}]}))},null,8,["label"])])])),[[Xe,o.value==f]])),128))])}}},Il={class:"flex items-center gap-2 text-2xl font-semibold leading-6 text-ink-gray-9"},jl={class:"flex flex-col gap-3"},Al={class:"flex justify-between gap-2"},Jl={class:"flex flex-row-reverse gap-2"},Yl={key:0},Pl={__name:"GridRowFieldsModal",props:Z({doctype:{type:String,default:"CRM Lead"},parentDoctype:{type:String,default:""}},{modelValue:{},modelModifiers:{}}),emits:Z(["reload"],["update:modelValue"]),setup(p,{emit:c}){const o=p,D=c,G=ee(p,"modelValue"),S=N(o.doctype),M=N(!1),L=N(!1),U=N(!1);function O(){return{doctype:S.value,type:"Grid Row",parent_doctype:o.parentDoctype}}const w=_e({url:"crm.fcrm.doctype.crm_fields_layout.crm_fields_layout.get_fields_layout",cache:["GridRowFieldsModal",S.value,o.parentDoctype],params:O(),onSuccess(e){w.originalData=JSON.parse(JSON.stringify(e))}});Re(()=>w==null?void 0:w.data,()=>{L.value=JSON.stringify(w==null?void 0:w.data)!==JSON.stringify(w==null?void 0:w.originalData)},{deep:!0}),Qe(()=>Ze(b,100)());function b(){ge(()=>{w.params=O(),w.reload()})}function u(){let e=JSON.parse(JSON.stringify(w.data));e.forEach(F=>{F.sections&&F.sections.forEach(_=>{_.columns.forEach(n=>{n.fields&&(n.fields=n.fields.map(f=>f.fieldname))})})}),M.value=!0,ll("crm.fcrm.doctype.crm_fields_layout.crm_fields_layout.save_fields_layout",{doctype:S.value,type:"Grid Row",layout:JSON.stringify(e)}).then(()=>{M.value=!1,G.value=!1,tl("data_fields_layout_builder",{doctype:S.value}),D("reload")})}return(e,F)=>{const _=A("Button");return a(),v(t(Fe),{modelValue:G.value,"onUpdate:modelValue":F[1]||(F[1]=n=>G.value=n),options:{size:"4xl"}},{"body-title":V(()=>[y("h3",Il,[y("div",null,T(e.__("Edit Grid Row Fields Layout")),1),L.value?(a(),v(t(el),{key:0,label:e.__("Not Saved"),variant:"subtle",theme:"orange"},null,8,["label"])):R("",!0)])]),"body-content":V(()=>{var n;return[y("div",jl,[y("div",Al,[h(_,{label:U.value?e.__("Hide preview"):e.__("Show preview"),onClick:F[0]||(F[0]=f=>U.value=!U.value)},null,8,["label"]),y("div",Jl,[h(_,{loading:M.value,label:e.__("Save"),variant:"solid",onClick:u},null,8,["loading","label"]),h(_,{label:e.__("Reset"),onClick:b},null,8,["label"])])]),(n=t(w))!=null&&n.data?(a(),$("div",Yl,[U.value?(a(),v(Be,{key:1,tabs:t(w).data,data:{},preview:!0},null,8,["tabs"])):(a(),v(El,{key:0,tabs:t(w).data,doctype:S.value},null,8,["tabs","doctype"]))])):R("",!0)])]}),_:1},8,["modelValue"])}}},zl={class:"bg-surface-modal px-4 pb-6 pt-5 sm:px-6"},Hl={class:"mb-5 flex items-center justify-between"},ql={class:"text-2xl font-semibold leading-6 text-ink-gray-9"},Kl={class:"flex items-center gap-1"},Wl={__name:"GridRowModal",props:Z({index:Number,data:Object,doctype:String,parentDoctype:String},{modelValue:{},modelModifiers:{},showGridRowFieldsModal:{},showGridRowFieldsModalModifiers:{}}),emits:["update:modelValue","update:showGridRowFieldsModal"],setup(p){const c=p,{isManager:o}=be(),D=ee(p,"modelValue"),G=ee(p,"showGridRowFieldsModal"),S=_e({url:"crm.fcrm.doctype.crm_fields_layout.crm_fields_layout.get_fields_layout",cache:["Grid Row",c.doctype,c.parentDoctype],params:{doctype:c.doctype,type:"Grid Row",parent_doctype:c.parentDoctype},auto:!0});function M(){G.value=!0,ge(()=>D.value=!1)}return(L,U)=>{const O=A("Button"),w=A("Dialog");return a(),v(w,{modelValue:D.value,"onUpdate:modelValue":U[1]||(U[1]=b=>D.value=b),options:{size:"4xl"}},{body:V(()=>[y("div",zl,[y("div",Hl,[y("div",null,[y("h3",ql,T(L.__("Editing Row {0}",[p.index+1])),1)]),y("div",Kl,[t(o)()?(a(),v(O,{key:0,tooltip:L.__("Edit fields layout"),variant:"ghost",class:"w-7",icon:ye,onClick:M},null,8,["tooltip"])):R("",!0),h(O,{icon:"x",variant:"ghost",class:"w-7",onClick:U[0]||(U[0]=b=>D.value=!1)})])]),y("div",null,[t(S).data?(a(),v(Be,{key:0,tabs:t(S).data,data:p.data,doctype:p.doctype,isGridRow:!0},null,8,["tabs","data","doctype"])):R("",!0)])])]),_:1},8,["modelValue"])}}},Xl=N(!1),Ql=N(""),Zl=N({}),et=N(null);function Me(p,c,o,D){p&&(o==null||o(),Ql.value=p,Zl.value=c||{},et.value=D||null,Xl.value=!0)}const lt={class:"flex flex-col flex-1 text-base"},tt={key:0,class:"mb-1.5 text-sm text-ink-gray-5"},at={key:1,class:"rounded border border-outline-gray-modals"},nt={class:"grid-header flex items-center rounded-t-[7px] bg-surface-gray-2 text-ink-gray-5 truncate"},ot={class:"inline-flex items-center justify-center border-r border-outline-gray-2 h-8 p-2 w-12"},st={class:"inline-flex items-center justify-center border-r border-outline-gray-2 py-2 px-1 w-12"},it=["title"],rt={key:0,class:"text-ink-red-2"},ut={class:"flex items-center justify-center w-12"},dt=["onClick"],ct={class:"grid-row-checkbox inline-flex h-9.5 items-center bg-surface-white justify-center border-r border-outline-gray-modals p-2 w-12"},mt={class:"flex h-9.5 items-center justify-center bg-surface-white border-r border-outline-gray-modals py-2 px-1 text-sm text-ink-gray-8 w-12"},pt={class:"cursor-pointer"},vt={key:3,class:"flex h-full bg-surface-white justify-center items-center"},ft={class:"edit-row flex items-center justify-center w-12"},yt={key:1,class:"flex flex-col items-center rounded p-5 text-sm text-ink-gray-5"},gt={key:2,class:"mt-2 flex flex-row gap-2"},_t={__name:"Grid",props:Z({label:{type:String,default:""},doctype:{type:String,required:!0},parentDoctype:{type:String,required:!0},parentFieldname:{type:String,required:!0},overrides:{type:Object,default:()=>({})}},{modelValue:{},modelModifiers:{},parent:{},parentModifiers:{}}),emits:["update:modelValue","update:parent"],setup(p){var ke;const c=p,o=P("triggerOnChange",()=>{}),D=P("triggerOnRowAdd",()=>{}),G=P("triggerOnRowRemove",()=>{}),{getGridViewSettings:S,getFields:M,getFloatWithPrecision:L,getCurrencyWithPrecision:U,getFormattedCurrency:O,getGridSettings:w}=re(c.doctype);re(c.parentDoctype);const{users:b,getUser:u}=be(),e=ee(p,"modelValue"),F=ee(p,"parent");H("parentDoc",F);const _=N(new Array(((ke=e.value)==null?void 0:ke.length)||[]).fill(!1)),n=al(new Set),f=N(!1),l=N(!1),i=I(()=>w()),C=I(()=>{let r=S(c.parentDoctype),k=M();return r.length?r.map(X=>d(k.find(Y=>Y.fieldname===X.fieldname))):(k==null?void 0:k.filter(B=>B.in_list_view).map(B=>d(B)))||[]}),x=I(()=>{var r;return((r=M())==null?void 0:r.map(k=>d(k)))||[]});function d(r){var B,X;return r.fieldtype==="Link"&&r.options!=="User"&&(r.create||(r.create=(Y,se,m,z)=>{const s=g=>{g&&j(g.name,se,m)};Me(se.options,Y,z,s)})),r.fieldtype==="Link"&&r.options==="User"&&(r.fieldtype="User",r.link_filters=JSON.stringify({...r.link_filters?JSON.parse(r.link_filters):{},name:["in",(B=b.data.crmUsers)==null?void 0:B.map(Y=>Y.name)]})),{...{...r,filters:r.link_filters&&JSON.parse(r.link_filters),placeholder:r.placeholder||r.label},...(X=c.overrides.fields)==null?void 0:X.find(Y=>Y.fieldname===r.fieldname)}}const W=I(()=>{var k;if(!((k=C.value)!=null&&k.length))return"1fr";let r=S(c.parentDoctype);return r.length?r.map(B=>`minmax(0, ${B.columns||2}fr)`).join(" "):C.value.map(()=>"minmax(0, 2fr)").join(" ")}),E=I(()=>{var r;return(r=e.value)!=null&&r.length?e.value.length===n.size:!1}),oe=I(()=>n.size>0),Ue=r=>{var k;r?(k=e.value)==null||k.forEach(B=>n.add(B.name)):n.clear()},Te=r=>{n.has(r.name)?n.delete(r.name):n.add(r.name)},Ge=()=>{var k;const r={};(k=x.value)==null||k.forEach(B=>{B.fieldtype==="Check"?r[B.fieldname]=!1:r[B.fieldname]="",B.default&&(r[B.fieldname]=Ie(B.default,B.fieldtype))}),r.name=ie(10),_.value.push(!1),r.__islocal=!0,r.idx=e.value.length+1,r.doctype=c.doctype,r.parentfield=c.parentFieldname,r.parenttype=c.parentDoctype,e.value.push(r),D(r)},Ne=()=>{e.value=e.value.filter(r=>!n.has(r.name)),G(n,e.value),_.value.pop(),n.clear()},Ee=()=>{e.value.forEach((r,k)=>{r.idx=k+1})};function j(r,k,B){o(k.fieldname,r,B)}function Ie(r,k){if(["Float","Currency","Percent"].includes(k))return Q(r);if(k==="Check"){if(["1","true","True"].includes(r))return!0;if(["0","false","False"].includes(r))return!1}else{if(k==="Int")return parseInt(r);if(r==="Today"&&k==="Date")return ae().format("YYYY-MM-DD");if(["Now","now"].includes(r)&&k==="Datetime")return ae().format("YYYY-MM-DD HH:mm:ss");if(["Now","now"].includes(r)&&k==="Time")return ae().format("HH:mm:ss");if(k==="Date")return ae(r).format("YYYY-MM-DD");if(k==="Datetime")return ae(r).format("YYYY-MM-DD HH:mm:ss");if(k==="Time")return ae(r).format("HH:mm:ss")}return r}return(r,k)=>{var X,Y,se;const B=A("Button");return a(),$("div",lt,[p.label?(a(),$("div",tt,T(r.__(p.label)),1)):R("",!0),(X=C.value)!=null&&X.length?(a(),$("div",at,[y("div",nt,[y("div",ot,[h(t(ve),{class:"cursor-pointer duration-300",modelValue:E.value,onClick:k[0]||(k[0]=q(m=>Ue(m.target.checked),["stop"]))},null,8,["modelValue"])]),y("div",st,T(r.__("No")),1),y("div",{class:"grid w-full truncate",style:we({gridTemplateColumns:W.value})},[(a(!0),$(le,null,te(C.value,m=>(a(),$("div",{class:J(["border-r border-outline-gray-2 p-2 truncate",["Int","Float","Currency","Percent"].includes(m.fieldtype)?"text-right":""]),key:m.fieldname,title:m.label},[pe(T(r.__(m.label))+" ",1),m.reqd||m.mandatory_depends_on&&m.mandatory_via_depends_on?(a(),$("span",rt,"*")):R("",!0)],10,it))),128))],4),y("div",ut,[h(B,{tooltip:r.__("Edit grid fields"),class:"rounded !bg-surface-gray-2 border-0 !text-ink-gray-5",variant:"outline",icon:"settings",onClick:k[1]||(k[1]=m=>f.value=!0)},null,8,["tooltip"])])]),(Y=e.value)!=null&&Y.length?(a(),v(t(ne),{key:0,class:"w-full",modelValue:e.value,"onUpdate:modelValue":k[3]||(k[3]=m=>e.value=m),delay:t(qe)()?200:0,group:"rows","item-key":"name",onEnd:Ee},{item:V(({element:m,index:z})=>[y("div",{class:"grid-row flex cursor-pointer items-center border-b border-outline-gray-modals bg-surface-modals last:rounded-b last:border-b-0",onClick:q(()=>{i.value.editable_grid||(_.value[z]=!0)},["stop"])},[y("div",ct,[h(t(ve),{class:"cursor-pointer duration-300",modelValue:n.has(m.name),onClick:q(s=>Te(m),["stop"])},null,8,["modelValue","onClick"])]),y("div",mt,T(z+1),1),y("div",{class:"grid w-full h-9.5",style:we({gridTemplateColumns:W.value})},[(a(!0),$(le,null,te(C.value,s=>(a(),$("div",{class:"border-r border-outline-gray-modals h-full",key:s.fieldname},[s.read_only&&!["Int","Float","Currency","Percent","Check"].includes(s.fieldtype)?(a(),v(t(de),{key:0,type:"text",placeholder:s.placeholder,modelValue:m[s.fieldname],"onUpdate:modelValue":g=>m[s.fieldname]=g,disabled:!0},null,8,["placeholder","modelValue","onUpdate:modelValue"])):["Link","Dynamic Link"].includes(s.fieldtype)?(a(),v(ue,{key:1,class:"text-sm text-ink-gray-8",value:m[s.fieldname],doctype:s.fieldtype=="Link"?s.options:m[s.options],filters:s.filters,onChange:g=>j(g,s,m),onCreate:(g,je)=>s.create(r.v,s,m,je)},null,8,["value","doctype","filters","onChange","onCreate"])):s.fieldtype==="User"?(a(),v(ue,{key:2,class:"form-control",value:t(u)(m[s.fieldname]).full_name,doctype:s.options,filters:s.filters,onChange:g=>j(g,s,m),placeholder:s.placeholder,hideMe:!0},{prefix:V(()=>[h(ce,{class:"mr-2",user:m[s.fieldname],size:"sm"},null,8,["user"])]),"item-prefix":V(({option:g})=>[h(ce,{class:"mr-2",user:g.value,size:"sm"},null,8,["user"])]),"item-label":V(({option:g})=>[h(t(Le),{text:g.value},{default:V(()=>[y("div",pt,T(t(u)(g.value).full_name),1)]),_:2},1032,["text"])]),_:2},1032,["value","doctype","filters","onChange","placeholder"])):s.fieldtype==="Check"?(a(),$("div",vt,[h(t(ve),{class:"cursor-pointer duration-300",modelValue:m[s.fieldname],"onUpdate:modelValue":g=>m[s.fieldname]=g,disabled:!i.value.editable_grid,onChange:g=>j(g.target.checked,s,m)},null,8,["modelValue","onUpdate:modelValue","disabled","onChange"])])):s.fieldtype==="Date"?(a(),v(t(De),{key:4,value:m[s.fieldname],"icon-left":"",variant:"outline",formatter:g=>t(me)(g,"",!0),"input-class":"border-none text-sm text-ink-gray-8",onChange:g=>j(g,s,m)},null,8,["value","formatter","onChange"])):s.fieldtype==="Datetime"?(a(),v(t(Se),{key:5,value:m[s.fieldname],"icon-left":"",variant:"outline",formatter:g=>t(me)(g,"",!0,!0),"input-class":"border-none text-sm text-ink-gray-8",onChange:g=>j(g,s,m)},null,8,["value","formatter","onChange"])):["Small Text","Text","Long Text","Code"].includes(s.fieldtype)?(a(),v(t(de),{key:6,rows:"1",type:"textarea",variant:"outline",value:m[s.fieldname],onChange:g=>j(g.target.value,s,m)},null,8,["value","onChange"])):s.fieldtype==="Select"?(a(),v(t(de),{key:7,class:"text-sm text-ink-gray-8",type:"select",variant:"outline",modelValue:m[s.fieldname],"onUpdate:modelValue":g=>m[s.fieldname]=g,options:s.options,onChange:g=>j(g.target.value,s,m)},null,8,["modelValue","onUpdate:modelValue","options","onChange"])):s.fieldtype==="Password"?(a(),v(Ve,{key:8,variant:"outline",value:m[s.fieldname],disabled:!!s.read_only,onChange:g=>j(g.target.value,s,m)},null,8,["value","disabled","onChange"])):s.fieldtype==="Int"?(a(),v(K,{key:9,class:"[&_input]:text-right",type:"text",variant:"outline",value:m[s.fieldname]||"0",disabled:!!s.read_only,onChange:g=>j(g.target.value,s,m)},null,8,["value","disabled","onChange"])):s.fieldtype==="Percent"?(a(),v(K,{key:10,class:"[&_input]:text-right",type:"text",variant:"outline",value:t(L)(s.fieldname,m),formattedValue:(m[s.fieldname]||"0")+"%",disabled:!!s.read_only,onChange:g=>j(t(Q)(g.target.value),s,m)},null,8,["value","formattedValue","disabled","onChange"])):s.fieldtype==="Float"?(a(),v(K,{key:11,class:"[&_input]:text-right",type:"text",variant:"outline",value:t(L)(s.fieldname,m),formattedValue:m[s.fieldname],disabled:!!s.read_only,onChange:g=>j(t(Q)(g.target.value),s,m)},null,8,["value","formattedValue","disabled","onChange"])):s.fieldtype==="Currency"?(a(),v(K,{key:12,class:"[&_input]:text-right",type:"text",variant:"outline",value:t(U)(s.fieldname,m),formattedValue:t(O)(s.fieldname,m,F.value),disabled:!!s.read_only,onChange:g=>j(t(Q)(g.target.value),s,m)},null,8,["value","formattedValue","disabled","onChange"])):s.fieldtype==="Autocomplete"?(a(),v(t(nl),{key:13,class:"text-sm text-ink-gray-8",modelValue:m[s.fieldname],"onUpdate:modelValue":g=>m[s.fieldname]=typeof g=="object"?g.value:g,onChange:g=>j(typeof g=="object"?g.value:g,s,m),options:s.options,placeholder:s.placeholder,disabled:!!s.read_only},null,8,["modelValue","onUpdate:modelValue","onChange","options","placeholder","disabled"])):(a(),v(t(de),{key:14,class:"text-sm text-ink-gray-8",type:"text",variant:"outline",modelValue:m[s.fieldname],"onUpdate:modelValue":g=>m[s.fieldname]=g,options:s.options,onChange:g=>j(g.target.value,s,m)},null,8,["modelValue","onUpdate:modelValue","options","onChange"]))]))),128))],4),y("div",ft,[h(B,{tooltip:r.__("Edit row"),class:"rounded border-0 !text-ink-gray-7",variant:"outline",icon:ye,onClick:s=>_.value[z]=!0},null,8,["tooltip","onClick"])]),_.value[z]?(a(),v(Wl,{key:0,modelValue:_.value[z],"onUpdate:modelValue":s=>_.value[z]=s,showGridRowFieldsModal:l.value,"onUpdate:showGridRowFieldsModal":k[2]||(k[2]=s=>l.value=s),index:z,data:m,doctype:p.doctype,parentDoctype:p.parentDoctype},null,8,["modelValue","onUpdate:modelValue","showGridRowFieldsModal","index","data","doctype","parentDoctype"])):R("",!0)],8,dt)]),_:1},8,["modelValue","delay"])):(a(),$("div",yt,T(r.__("No Data")),1))])):R("",!0),(se=C.value)!=null&&se.length?(a(),$("div",gt,[oe.value?(a(),v(B,{key:0,label:r.__("Delete"),variant:"solid",theme:"red",onClick:Ne},null,8,["label"])):R("",!0),h(B,{label:r.__("Add Row"),onClick:Ge},null,8,["label"])])):R("",!0),l.value?(a(),v(Pl,{key:3,modelValue:l.value,"onUpdate:modelValue":k[4]||(k[4]=m=>l.value=m),doctype:p.doctype,parentDoctype:p.parentDoctype},null,8,["modelValue","doctype","parentDoctype"])):R("",!0),f.value?(a(),v(hl,{key:4,modelValue:f.value,"onUpdate:modelValue":k[5]||(k[5]=m=>f.value=m),doctype:p.doctype,parentDoctype:p.parentDoctype},null,8,["modelValue","doctype","parentDoctype"])):R("",!0)])}}},bt=he(_t,[["__scopeId","data-v-ba8537b3"]]);const ht={key:0,class:"field"},kt={key:0,class:"mb-2 text-sm text-ink-gray-5"},xt={key:0,class:"text-ink-red-2"},Ct={key:4,class:"flex items-center gap-2"},wt={key:0,class:"text-ink-red-3"},Vt={key:5,class:"flex gap-1"},$t={class:"cursor-pointer"},Dt={__name:"Field",props:{field:Object},setup(p){const c=p,o=P("data"),D=P("doctype"),G=P("preview"),S=P("isGridRow"),{getFormattedPercent:M,getFormattedFloat:L,getFormattedCurrency:U}=re(D),{users:O,getUser:w}=be();let b,u;if(S)b=P("triggerOnChange",()=>{}),u=P("parentDoc");else{const{triggerOnChange:l,triggerOnRowAdd:i,triggerOnRowRemove:C}=Ae(D,o.value.name);b=l,H("triggerOnChange",b),H("triggerOnRowAdd",i),H("triggerOnRowRemove",C)}const e=I(()=>{var C;let l=c.field;l.fieldtype=="Select"&&typeof l.options=="string"&&(l.options=l.options.split(`
`).map(x=>({label:x,value:x})),l.options[0].value!==""&&l.options.unshift({label:"",value:""})),l.fieldtype==="Link"&&l.options==="User"&&(l.fieldtype="User",l.link_filters=JSON.stringify({...l.link_filters?JSON.parse(l.link_filters):{},name:["in",(C=O.data.crmUsers)==null?void 0:C.map(x=>x.name)]})),l.fieldtype==="Link"&&l.options!=="User"&&(l.create||(l.create=(x,d)=>{const W=E=>{E&&n(E.name,l)};Me(l.options,x,d,W)}));let i={...l,filters:l.link_filters&&JSON.parse(l.link_filters),placeholder:l.placeholder||l.label,display_via_depends_on:Ce(l.depends_on,o.value),mandatory_via_depends_on:Ce(l.mandatory_depends_on,o.value)};return i.visible=F(i),i});function F(l){var x;if(G.value)return!0;const i=Number(((x=window.sysdefaults)==null?void 0:x.hide_empty_read_only_fields)??1),C=l.read_only&&(o.value[l.fieldname]||!i);return(l.fieldtype=="Check"||C||!l.read_only)&&(!l.depends_on||l.display_via_depends_on)&&!l.hidden}const _=l=>l.placeholder?__(l.placeholder):["Select","Link"].includes(l.fieldtype)?__("Select {0}",[__(l.label)]):__("Enter {0}",[__(l.label)]);function n(l,i){S?b(i.fieldname,l,o.value):b(i.fieldname,l)}function f(l,i){return i.fieldtype==="Duration"?l||0:l}return(l,i)=>{const C=A("FormControl"),x=A("Button");return e.value.visible?(a(),$("div",ht,[e.value.fieldtype!="Check"?(a(),$("div",kt,[pe(T(l.__(e.value.label))+" ",1),e.value.reqd||e.value.mandatory_depends_on&&e.value.mandatory_via_depends_on?(a(),$("span",xt,"*")):R("",!0)])):R("",!0),e.value.read_only&&!["Int","Float","Currency","Percent","Check"].includes(e.value.fieldtype)?(a(),v(C,{key:1,type:"text",placeholder:_(e.value),modelValue:t(o)[e.value.fieldname],"onUpdate:modelValue":i[0]||(i[0]=d=>t(o)[e.value.fieldname]=d),disabled:!0,description:e.value.description},null,8,["placeholder","modelValue","description"])):e.value.fieldtype==="Table"?(a(),v(bt,{key:2,modelValue:t(o)[e.value.fieldname],"onUpdate:modelValue":i[1]||(i[1]=d=>t(o)[e.value.fieldname]=d),parent:t(o),"onUpdate:parent":i[2]||(i[2]=d=>ol(o)?o.value=d:null),doctype:e.value.options,parentDoctype:t(D),parentFieldname:e.value.fieldname},null,8,["modelValue","parent","doctype","parentDoctype","parentFieldname"])):e.value.fieldtype==="Select"?(a(),v(C,{key:3,type:"select",class:J(["form-control",e.value.prefix?"prefix":""]),options:e.value.options,modelValue:t(o)[e.value.fieldname],"onUpdate:modelValue":i[3]||(i[3]=d=>t(o)[e.value.fieldname]=d),onChange:i[4]||(i[4]=d=>n(d.target.value,e.value)),placeholder:_(e.value),description:e.value.description},sl({_:2},[e.value.prefix?{name:"prefix",fn:V(()=>[h(He,{class:J(e.value.prefix)},null,8,["class"])]),key:"0"}:void 0]),1032,["class","options","modelValue","placeholder","description"])):e.value.fieldtype=="Check"?(a(),$("div",Ct,[h(C,{class:"form-control",type:"checkbox",modelValue:t(o)[e.value.fieldname],"onUpdate:modelValue":i[5]||(i[5]=d=>t(o)[e.value.fieldname]=d),onChange:i[6]||(i[6]=d=>n(d.target.checked,e.value)),disabled:!!e.value.read_only,description:e.value.description},null,8,["modelValue","disabled","description"]),y("label",{class:"text-sm text-ink-gray-5",onClick:i[7]||(i[7]=()=>{e.value.read_only||(t(o)[e.value.fieldname]=!t(o)[e.value.fieldname])})},[pe(T(l.__(e.value.label))+" ",1),e.value.mandatory?(a(),$("span",wt,"*")):R("",!0)])])):["Link","Dynamic Link"].includes(e.value.fieldtype)?(a(),$("div",Vt,[h(ue,{class:"form-control flex-1 truncate",value:t(o)[e.value.fieldname],doctype:e.value.fieldtype=="Link"?e.value.options:t(o)[e.value.options],filters:e.value.filters,onChange:i[8]||(i[8]=d=>n(d,e.value)),placeholder:_(e.value),onCreate:e.value.create},null,8,["value","doctype","filters","placeholder","onCreate"]),t(o)[e.value.fieldname]&&e.value.edit?(a(),v(x,{key:0,class:"shrink-0",label:l.__("Edit"),iconLeft:ye,onClick:i[9]||(i[9]=d=>e.value.edit(t(o)[e.value.fieldname]))},null,8,["label"])):R("",!0)])):e.value.fieldtype==="Table MultiSelect"?(a(),v(dl,{key:6,modelValue:t(o)[e.value.fieldname],"onUpdate:modelValue":i[10]||(i[10]=d=>t(o)[e.value.fieldname]=d),doctype:e.value.options,onChange:i[11]||(i[11]=d=>n(d,e.value))},null,8,["modelValue","doctype"])):e.value.fieldtype==="User"?(a(),v(ue,{key:7,class:"form-control",value:t(o)[e.value.fieldname]&&t(w)(t(o)[e.value.fieldname]).full_name,doctype:e.value.options,filters:e.value.filters,onChange:i[12]||(i[12]=d=>n(d,e.value)),placeholder:_(e.value),hideMe:!0},{prefix:V(()=>[t(o)[e.value.fieldname]?(a(),v(ce,{key:0,class:"mr-2",user:t(o)[e.value.fieldname],size:"sm"},null,8,["user"])):R("",!0)]),"item-prefix":V(({option:d})=>[h(ce,{class:"mr-2",user:d.value,size:"sm"},null,8,["user"])]),"item-label":V(({option:d})=>[h(t(Le),{text:d.value},{default:V(()=>[y("div",$t,T(t(w)(d.value).full_name),1)]),_:2},1032,["text"])]),_:1},8,["value","doctype","filters","placeholder"])):e.value.fieldtype==="Datetime"?(a(),v(t(Se),{key:8,value:t(o)[e.value.fieldname],formatter:d=>t(me)(d,"",!0,!0),placeholder:_(e.value),"input-class":"border-none",onChange:i[13]||(i[13]=d=>n(d,e.value))},null,8,["value","formatter","placeholder"])):e.value.fieldtype==="Date"?(a(),v(t(De),{key:9,value:t(o)[e.value.fieldname],formatter:d=>t(me)(d,"",!0),placeholder:_(e.value),"input-class":"border-none",onChange:i[14]||(i[14]=d=>n(d,e.value))},null,8,["value","formatter","placeholder"])):["Small Text","Text","Long Text","Code"].includes(e.value.fieldtype)?(a(),v(C,{key:10,type:"textarea",value:t(o)[e.value.fieldname],placeholder:_(e.value),description:e.value.description,onChange:i[15]||(i[15]=d=>n(d.target.value,e.value))},null,8,["value","placeholder","description"])):e.value.fieldtype==="Password"?(a(),v(Ve,{key:11,value:t(o)[e.value.fieldname],placeholder:_(e.value),description:e.value.description,onChange:i[16]||(i[16]=d=>n(d.target.value,e.value))},null,8,["value","placeholder","description"])):e.value.fieldtype==="Int"?(a(),v(K,{key:12,type:"text",placeholder:_(e.value),value:t(o)[e.value.fieldname]||"0",disabled:!!e.value.read_only,description:e.value.description,onChange:i[17]||(i[17]=d=>n(d.target.value,e.value))},null,8,["placeholder","value","disabled","description"])):e.value.fieldtype==="Percent"?(a(),v(K,{key:13,type:"text",value:t(M)(e.value.fieldname,t(o)),placeholder:_(e.value),disabled:!!e.value.read_only,description:e.value.description,onChange:i[18]||(i[18]=d=>n(t(Q)(d.target.value),e.value))},null,8,["value","placeholder","disabled","description"])):e.value.fieldtype==="Float"?(a(),v(K,{key:14,type:"text",value:t(L)(e.value.fieldname,t(o)),placeholder:_(e.value),disabled:!!e.value.read_only,description:e.value.description,onChange:i[19]||(i[19]=d=>n(t(Q)(d.target.value),e.value))},null,8,["value","placeholder","disabled","description"])):e.value.fieldtype==="Currency"?(a(),v(K,{key:15,type:"text",value:t(U)(e.value.fieldname,t(o),t(u)),placeholder:_(e.value),disabled:!!e.value.read_only,description:e.value.description,onChange:i[20]||(i[20]=d=>n(t(Q)(d.target.value),e.value))},null,8,["value","placeholder","disabled","description"])):(a(),v(C,{key:16,type:"text",placeholder:_(e.value),value:f(t(o)[e.value.fieldname],e.value),disabled:!!e.value.read_only,description:e.value.description,onChange:i[21]||(i[21]=d=>n(d.target.value,e.value))},null,8,["placeholder","value","disabled","description"]))])):R("",!0)}}},St=he(Dt,[["__scopeId","data-v-be1ce7d2"]]),Ft={class:"column flex flex-col gap-4 w-full"},Rt={key:0,class:"text-ink-gray-9 max-w-fit text-base"},Lt={__name:"Column",props:{column:Object},setup(p){return(c,o)=>(a(),$("div",Ft,[p.column.label&&!p.column.hideLabel?(a(),$("div",Rt,T(p.column.label),1)):R("",!0),(a(!0),$(le,null,te(p.column.fields,D=>(a(),v(St,{key:D.fieldname,field:D,"data-name":D.fieldname},null,8,["field","data-name"]))),128))]))}},Ot={__name:"Section",props:{section:Object},setup(p){const c=P("hasTabs");return(o,D)=>p.section.hidden?R("",!0):(a(),$("div",{key:0,class:J(["section",[p.section.hideBorder?"pt-4":"border-t border-outline-gray-modals mt-5 pt-5"]])},[h(Je,{class:J(["flex sm:flex-row flex-col gap-4 text-lg font-medium",{"px-3 sm:px-5":t(c)}]),labelClass:["text-lg font-medium",{"px-3 sm:px-5":t(c)}],label:p.section.label,hideLabel:p.section.hideLabel||!p.section.label,opened:p.section.opened,collapsible:p.section.collapsible,collapseIconPosition:"right"},{default:V(()=>[(a(!0),$(le,null,te(p.section.columns,G=>(a(),v(Lt,{key:G.name,class:J({"mt-6":p.section.label&&!p.section.hideLabel}),column:G,"data-name":G.name},null,8,["class","column","data-name"]))),128))]),_:1},8,["class","labelClass","label","hideLabel","opened","collapsible"])],2))}};const Mt={__name:"FieldLayout",props:{tabs:Array,data:Object,doctype:{type:String,default:"CRM Lead"},isGridRow:{type:Boolean,default:!1},preview:{type:Boolean,default:!1}},setup(p){const c=p,o=N(0),D=I(()=>c.tabs.length>1||c.tabs.length==1&&c.tabs[0].label);return H("data",I(()=>c.data)),H("hasTabs",D),H("doctype",c.doctype),H("preview",c.preview),H("isGridRow",c.isGridRow),(G,S)=>(a(),$("div",{class:J(["flex flex-col",{"border border-outline-gray-1 rounded-lg":D.value,"border-outline-gray-modals":D.value}])},[h(t(ze),{as:"div",modelValue:o.value,"onUpdate:modelValue":S[0]||(S[0]=M=>o.value=M),tabs:p.tabs},{default:V(()=>[h(t(Ye),{class:J(D.value?"border-outline-gray-modals":"hidden")},null,8,["class"]),h(t(Pe),null,{default:V(({tab:M})=>[y("div",{class:J(["sections overflow-hidden",{"my-4 sm:my-5":D.value}])},[(a(!0),$(le,null,te(M.sections,L=>(a(),v(Ot,{key:L.name,section:L,"data-name":L.name},null,8,["section","data-name"]))),128))],2)]),_:1})]),_:1},8,["modelValue","tabs"])],2))}},Be=he(Mt,[["__scopeId","data-v-0a2ef829"]]);export{Be as F,bt as G,El as _,Ql as a,Zl as b,Me as c,et as d,Xl as s};
//# sourceMappingURL=FieldLayout-2818ec1d.js.map
