{"version":3,"file":"Contact-85e60ec1.js","sources":["../../../../frontend/src/pages/Contact.vue"],"sourcesContent":["<template>\n  <LayoutHeader v-if=\"contact.doc\">\n    <template #left-header>\n      <Breadcrumbs :items=\"breadcrumbs\">\n        <template #prefix=\"{ item }\">\n          <Icon v-if=\"item.icon\" :icon=\"item.icon\" class=\"mr-2 h-4\" />\n        </template>\n      </Breadcrumbs>\n    </template>\n    <template #right-header>\n      <CustomActions\n        v-if=\"contact._actions?.length\"\n        :actions=\"contact._actions\"\n      />\n    </template>\n  </LayoutHeader>\n  <div v-if=\"contact.doc\" ref=\"parentRef\" class=\"flex h-full\">\n    <Resizer\n      v-if=\"contact.doc\"\n      :parent=\"$refs.parentRef\"\n      class=\"flex h-full flex-col overflow-hidden border-r\"\n    >\n      <div class=\"border-b\">\n        <FileUploader\n          @success=\"changeContactImage\"\n          :validateFile=\"validateIsImageFile\"\n        >\n          <template #default=\"{ openFileSelector, error }\">\n            <div class=\"flex flex-col items-start justify-start gap-4 p-5\">\n              <div class=\"flex gap-4 items-center\">\n                <div class=\"group relative h-15.5 w-15.5\">\n                  <Avatar\n                    size=\"3xl\"\n                    class=\"h-15.5 w-15.5\"\n                    :label=\"contact.doc.full_name\"\n                    :image=\"contact.doc.image\"\n                  />\n                  <component\n                    :is=\"contact.doc.image ? Dropdown : 'div'\"\n                    v-bind=\"\n                      contact.doc.image\n                        ? {\n                            options: [\n                              {\n                                icon: 'upload',\n                                label: contact.doc.image\n                                  ? __('Change image')\n                                  : __('Upload image'),\n                                onClick: openFileSelector,\n                              },\n                              {\n                                icon: 'trash-2',\n                                label: __('Remove image'),\n                                onClick: () => changeContactImage(''),\n                              },\n                            ],\n                          }\n                        : { onClick: openFileSelector }\n                    \"\n                    class=\"!absolute bottom-0 left-0 right-0\"\n                  >\n                    <div\n                      class=\"z-1 absolute bottom-0 left-0 right-0 flex h-14 cursor-pointer items-center justify-center rounded-b-full bg-black bg-opacity-40 pt-5 opacity-0 duration-300 ease-in-out group-hover:opacity-100\"\n                      style=\"\n                        -webkit-clip-path: inset(22px 0 0 0);\n                        clip-path: inset(22px 0 0 0);\n                      \"\n                    >\n                      <CameraIcon class=\"h-6 w-6 cursor-pointer text-white\" />\n                    </div>\n                  </component>\n                </div>\n                <div class=\"flex flex-col gap-2 truncate text-ink-gray-9\">\n                  <div class=\"truncate text-2xl font-medium\">\n                    <span v-if=\"contact.doc.salutation\">\n                      {{ contact.doc.salutation + '. ' }}\n                    </span>\n                    <span>{{ contact.doc.full_name }}</span>\n                  </div>\n                  <div\n                    v-if=\"contact.doc.company_name\"\n                    class=\"flex items-center gap-1.5 text-base text-ink-gray-8\"\n                  >\n                    <Avatar\n                      size=\"xs\"\n                      :label=\"contact.doc.company_name\"\n                      :image=\"\n                        getOrganization(contact.doc.company_name)\n                          ?.organization_logo\n                      \"\n                    />\n                    <span class=\"\">{{ contact.doc.company_name }}</span>\n                  </div>\n                  <ErrorMessage :message=\"__(error)\" />\n                </div>\n              </div>\n              <div class=\"flex gap-1.5\">\n                <Button\n                  v-if=\"callEnabled && contact.doc.mobile_no\"\n                  :label=\"__('Make Call')\"\n                  size=\"sm\"\n                  :iconLeft=\"PhoneIcon\"\n                  @click=\"callEnabled && makeCall(contact.doc.mobile_no)\"\n                />\n                <Button\n                  v-if=\"canDelete\"\n                  :label=\"__('Delete')\"\n                  theme=\"red\"\n                  size=\"sm\"\n                  iconLeft=\"trash-2\"\n                  @click=\"deleteContact()\"\n                />\n              </div>\n            </div>\n          </template>\n        </FileUploader>\n      </div>\n      <div\n        v-if=\"sections.data\"\n        class=\"flex flex-1 flex-col justify-between overflow-hidden\"\n      >\n        <SidePanelLayout\n          :sections=\"parsedSections\"\n          doctype=\"Contact\"\n          :docname=\"contact.doc.name\"\n          @reload=\"sections.reload\"\n        />\n      </div>\n    </Resizer>\n    <Tabs as=\"div\" v-model=\"tabIndex\" :tabs=\"tabs\">\n      <template #tab-item=\"{ tab, selected }\">\n        <button\n          class=\"group flex items-center gap-2 border-b border-transparent py-2.5 text-base text-ink-gray-5 duration-300 ease-in-out hover:border-outline-gray-3 hover:text-ink-gray-9\"\n          :class=\"{ 'text-ink-gray-9': selected }\"\n        >\n          <component v-if=\"tab.icon\" :is=\"tab.icon\" class=\"h-5\" />\n          {{ __(tab.label) }}\n          <Badge\n            class=\"group-hover:bg-surface-gray-7\"\n            :class=\"[selected ? 'bg-surface-gray-7' : 'bg-gray-600']\"\n            variant=\"solid\"\n            theme=\"gray\"\n            size=\"sm\"\n          >\n            {{ tab.count }}\n          </Badge>\n        </button>\n      </template>\n      <template #tab-panel=\"{ tab }\">\n        <DealsListView\n          v-if=\"tab.label === 'Deals' && rows.length\"\n          class=\"mt-4\"\n          :rows=\"rows\"\n          :columns=\"columns\"\n          :options=\"{ selectable: false, showTooltip: false }\"\n        />\n        <div\n          v-if=\"!rows.length\"\n          class=\"grid flex-1 place-items-center text-xl font-medium text-ink-gray-4\"\n        >\n          <div class=\"flex flex-col items-center justify-center space-y-3\">\n            <component :is=\"tab.icon\" class=\"!h-10 !w-10\" />\n            <div>{{ __('No {0} Found', [__(tab.label)]) }}</div>\n          </div>\n        </div>\n      </template>\n    </Tabs>\n  </div>\n  <ErrorPage\n    v-else-if=\"errorTitle\"\n    :errorTitle=\"errorTitle\"\n    :errorMessage=\"errorMessage\"\n  />\n  <DeleteLinkedDocModal\n    v-if=\"showDeleteLinkedDocModal\"\n    v-model=\"showDeleteLinkedDocModal\"\n    :doctype=\"'Contact'\"\n    :docname=\"contact.doc.name\"\n    name=\"Contacts\"\n  />\n</template>\n\n<script setup>\nimport ErrorPage from '@/components/ErrorPage.vue'\nimport Resizer from '@/components/Resizer.vue'\nimport Icon from '@/components/Icon.vue'\nimport SidePanelLayout from '@/components/SidePanelLayout.vue'\nimport LayoutHeader from '@/components/LayoutHeader.vue'\nimport PhoneIcon from '@/components/Icons/PhoneIcon.vue'\nimport CameraIcon from '@/components/Icons/CameraIcon.vue'\nimport DealsIcon from '@/components/Icons/DealsIcon.vue'\nimport DealsListView from '@/components/ListViews/DealsListView.vue'\nimport CustomActions from '@/components/CustomActions.vue'\nimport { formatDate, timeAgo, validateIsImageFile, setupCustomizations } from '@/utils'\nimport { getView } from '@/utils/view'\nimport { useDocument } from '@/data/document'\nimport { getSettings } from '@/stores/settings'\nimport { getMeta } from '@/stores/meta'\nimport { globalStore } from '@/stores/global.js'\nimport { usersStore } from '@/stores/users.js'\nimport { organizationsStore } from '@/stores/organizations.js'\nimport { statusesStore } from '@/stores/statuses'\nimport { showAddressModal, addressProps } from '@/composables/modals'\nimport { callEnabled } from '@/composables/settings'\nimport {\n  Breadcrumbs,\n  Avatar,\n  FileUploader,\n  Tabs,\n  call,\n  createResource,\n  usePageMeta,\n  Dropdown,\n  toast,\n} from 'frappe-ui'\nimport { ref, computed, h, watch } from 'vue'\nimport { useRoute, useRouter } from 'vue-router'\n\nconst { brand } = getSettings()\nconst { makeCall, $dialog, $socket } = globalStore()\n\nconst { getUser } = usersStore()\nconst { getOrganization } = organizationsStore()\nconst { getDealStatus } = statusesStore()\nconst { doctypeMeta } = getMeta('Contact')\n\nconst props = defineProps({\n  contactId: {\n    type: String,\n    required: true,\n  },\n})\n\nconst route = useRoute()\nconst router = useRouter()\n\nconst errorTitle = ref('')\nconst errorMessage = ref('')\n\nconst { document: contact, permissions, scripts } = useDocument('Contact', props.contactId)\n\nconst canDelete = computed(() => permissions.data?.permissions?.delete || false)\n\nconst breadcrumbs = computed(() => {\n  let items = [{ label: __('Contacts'), route: { name: 'Contacts' } }]\n\n  if (route.query.view || route.query.viewType) {\n    let view = getView(route.query.view, route.query.viewType, 'Contact')\n    if (view) {\n      items.push({\n        label: __(view.label),\n        icon: view.icon,\n        route: {\n          name: 'Contacts',\n          params: { viewType: route.query.viewType },\n          query: { view: route.query.view },\n        },\n      })\n    }\n  }\n\n  items.push({\n    label: title.value,\n    route: { name: 'Contact', params: { contactId: props.contactId } },\n  })\n  return items\n})\n\nconst title = computed(() => {\n  let t = doctypeMeta['Contact']?.title_field || 'name'\n  return contact.doc?.[t] || props.contactId\n})\n\nusePageMeta(() => {\n  return {\n    title: title.value,\n    icon: brand.favicon,\n  }\n})\nconst showDeleteLinkedDocModal = ref(false)\n\nasync function deleteContact() {\n  showDeleteLinkedDocModal.value = true\n}\n\nfunction changeContactImage(file) {\n  contact.doc.image = file?.file_url || ''\n  contact.save.submit(null, {\n    onSuccess: () => {\n      toast.success(__('Contact image updated'))\n    },\n  })\n}\n\nconst tabIndex = ref(0)\nconst tabs = [\n  {\n    label: 'Deals',\n    icon: h(DealsIcon, { class: 'h-4 w-4' }),\n    count: computed(() => deals.data?.length),\n  },\n]\n\nconst deals = createResource({\n  url: 'crm.api.contact.get_linked_deals',\n  cache: ['deals', props.contactId],\n  params: { contact: props.contactId },\n  auto: true,\n})\n\nconst rows = computed(() => {\n  if (!deals.data || deals.data == []) return []\n\n  return deals.data.map((row) => getDealRowObject(row))\n})\n\nconst sections = createResource({\n  url: 'crm.fcrm.doctype.crm_fields_layout.crm_fields_layout.get_sidepanel_sections',\n  cache: ['sidePanelSections', 'Contact'],\n  params: { doctype: 'Contact' },\n  auto: true,\n})\n\nconst parsedSections = computed(() => {\n  if (!sections.data) return []\n  return sections.data.map((section) => ({\n    ...section,\n    columns: section.columns.map((column) => ({\n      ...column,\n      fields: column.fields.map((field) => {\n        if (field.fieldname === 'email_id') {\n          return {\n            ...field,\n            read_only: false,\n            fieldtype: 'Dropdown',\n            options: (contact.doc?.email_ids || []).map((email) => ({\n              name: email.name,\n              value: email.email_id,\n              selected: email.email_id === contact.doc.email_id,\n              placeholder: 'john@doe.com',\n              onClick: () => setAsPrimary('email', email.email_id),\n              onSave: (option, isNew) =>\n                isNew\n                  ? createNew('email', option.value)\n                  : editOption(\n                      'Contact Email',\n                      option.name,\n                      'email_id',\n                      option.value,\n                    ),\n              onDelete: async (option, isNew) => {\n                contact.doc.email_ids = contact.doc.email_ids.filter(\n                  (e) => e.name !== option.name,\n                )\n                if (!isNew) await deleteOption('Contact Email', option.name)\n              },\n            })),\n            create: () => {\n              // Add a temporary new option locally (mirrors original behavior)\n              contact.doc.email_ids = [\n                ...(contact.doc.email_ids || []),\n                {\n                  name: 'new-1',\n                  value: '',\n                  selected: false,\n                  isNew: true,\n                },\n              ]\n            },\n          }\n        }\n        if (field.fieldname === 'mobile_no') {\n          return {\n            ...field,\n            read_only: false,\n            fieldtype: 'Dropdown',\n            options: (contact.doc?.phone_nos || []).map((phone) => ({\n              name: phone.name,\n              value: phone.phone,\n              selected: phone.phone === contact.doc.mobile_no,\n              onClick: () => setAsPrimary('mobile_no', phone.phone),\n              onSave: (option, isNew) =>\n                isNew\n                  ? createNew('phone', option.value)\n                  : editOption(\n                      'Contact Phone',\n                      option.name,\n                      'phone',\n                      option.value,\n                    ),\n              onDelete: async (option, isNew) => {\n                contact.doc.phone_nos = contact.doc.phone_nos.filter(\n                  (p) => p.name !== option.name,\n                )\n                if (!isNew) await deleteOption('Contact Phone', option.name)\n              },\n            })),\n            create: () => {\n              contact.doc.phone_nos = [\n                ...(contact.doc.phone_nos || []),\n                {\n                  name: 'new-1',\n                  value: '',\n                  selected: false,\n                  isNew: true,\n                },\n              ]\n            },\n          }\n        }\n        if (field.fieldname === 'address') {\n          return {\n            ...field,\n            create: (_value, close) => {\n              openAddressModal()\n              close && close()\n            },\n            edit: (address) => openAddressModal(address),\n          }\n        }\n        return field\n      }),\n    })),\n  }))\n})\n\nasync function setAsPrimary(field, value) {\n  let d = await call('crm.api.contact.set_as_primary', {\n    contact: contact.doc.name,\n    field,\n    value,\n  })\n  if (d) {\n    contact.reload()\n    toast.success(__('Contact updated'))\n  }\n}\n\nasync function createNew(field, value) {\n  if (!value) return\n  let d = await call('crm.api.contact.create_new', {\n    contact: contact.doc.name,\n    field,\n    value,\n  })\n  if (d) {\n    contact.reload()\n    toast.success(__('Contact updated'))\n  }\n}\n\nasync function editOption(doctype, name, fieldname, value) {\n  let d = await call('frappe.client.set_value', {\n    doctype,\n    name,\n    fieldname,\n    value,\n  })\n  if (d) {\n    contact.reload()\n    toast.success(__('Contact updated'))\n  }\n}\n\nasync function deleteOption(doctype, name) {\n  await call('frappe.client.delete', {\n    doctype,\n    name,\n  })\n  await contact.reload()\n  toast.success(__('Contact updated'))\n}\n\nconst { getFormattedCurrency } = getMeta('CRM Deal')\n\nconst columns = computed(() => dealColumns)\n\nfunction getDealRowObject(deal) {\n  return {\n    name: deal.name,\n    organization: {\n      label: deal.organization,\n      logo: getOrganization(deal.organization)?.organization_logo,\n    },\n    annual_revenue: getFormattedCurrency('annual_revenue', deal),\n    status: {\n      label: deal.status,\n      color: getDealStatus(deal.status)?.color,\n    },\n    email: deal.email,\n    mobile_no: deal.mobile_no,\n    deal_owner: {\n      label: deal.deal_owner && getUser(deal.deal_owner).full_name,\n      ...(deal.deal_owner && getUser(deal.deal_owner)),\n    },\n    modified: {\n      label: formatDate(deal.modified),\n      timeAgo: __(timeAgo(deal.modified)),\n    },\n  }\n}\n\nconst dealColumns = [\n  {\n    label: __('Organization'),\n    key: 'organization',\n    width: '11rem',\n  },\n  {\n    label: __('Amount'),\n    key: 'annual_revenue',\n    align: 'right',\n    width: '9rem',\n  },\n  {\n    label: __('Status'),\n    key: 'status',\n    width: '10rem',\n  },\n  {\n    label: __('Email'),\n    key: 'email',\n    width: '12rem',\n  },\n  {\n    label: __('Mobile no'),\n    key: 'mobile_no',\n    width: '11rem',\n  },\n  {\n    label: __('Deal owner'),\n    key: 'deal_owner',\n    width: '10rem',\n  },\n  {\n    label: __('Last modified'),\n    key: 'modified',\n    width: '8rem',\n  },\n]\n\nfunction openAddressModal(_address) {\n  showAddressModal.value = true\n  addressProps.value = {\n    doctype: 'Address',\n    address: _address,\n  }\n}\n\n// Setup custom actions from Form Scripts\nwatch(\n  () => contact.doc,\n  async (_doc) => {\n    if (scripts.data?.length) {\n      let s = await setupCustomizations(scripts.data, {\n        doc: _doc,\n        $dialog,\n        $socket,\n        router,\n        toast,\n        updateField: contact.setValue.submit,\n        createToast: toast.create,\n        deleteDoc: deleteContact,\n        call,\n      })\n      contact._actions = s.actions || []\n    }\n  },\n  { once: true },\n)\n</script>\n"],"names":["brand","getSettings","makeCall","$dialog","$socket","globalStore","getUser","usersStore","getOrganization","organizationsStore","getDealStatus","statusesStore","doctypeMeta","getMeta","props","__props","route","useRoute","router","useRouter","errorTitle","ref","errorMessage","contact","permissions","scripts","useDocument","canDelete","computed","_b","_a","breadcrumbs","items","view","getView","title","t","usePageMeta","showDeleteLinkedDocModal","deleteContact","changeContactImage","file","toast","tabIndex","tabs","h","DealsIcon","deals","createResource","rows","row","getDealRowObject","sections","parsedSections","section","column","field","email","setAsPrimary","option","isNew","createNew","editOption","e","deleteOption","phone","p","_value","close","openAddressModal","address","value","call","doctype","name","fieldname","getFormattedCurrency","columns","dealColumns","deal","formatDate","timeAgo","_address","showAddressModal","addressProps","watch","_doc","s","setupCustomizations","_unref","_createBlock","LayoutHeader","_createVNode","Breadcrumbs","_withCtx","item","Icon","CustomActions","_openBlock","_createElementBlock","_hoisted_1","Resizer","$refs","_createElementVNode","_hoisted_2","FileUploader","validateIsImageFile","openFileSelector","error","_hoisted_3","_hoisted_4","_hoisted_5","Avatar","_resolveDynamicComponent","Dropdown","_mergeProps","__","_hoisted_6","CameraIcon","_hoisted_7","_hoisted_8","_hoisted_9","_toDisplayString","_hoisted_10","_hoisted_11","_component_ErrorMessage","_hoisted_12","callEnabled","_component_Button","PhoneIcon","_cache","$event","_hoisted_13","SidePanelLayout","Tabs","tab","selected","_normalizeClass","_createTextVNode","_component_Badge","DealsListView","_hoisted_14","_hoisted_15","ErrorPage","_component_DeleteLinkedDocModal"],"mappings":"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"}